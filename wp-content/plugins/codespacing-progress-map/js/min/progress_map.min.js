function cspm_load_map_options(map_id,light_map,latLng,zoom){var map_script_id="undefined"!=typeof progress_map_vars.map_script_args[map_id]?map_id:"initial",latlng=null!=latLng?latLng.split(","):progress_map_vars.map_script_args[map_script_id].center.split(","),zoom_value=null!=zoom?parseInt(zoom):parseInt(progress_map_vars.map_script_args[map_script_id].zoom),max_zoom_value=parseInt(progress_map_vars.map_script_args[map_script_id].max_zoom),min_zoom_value=parseInt(progress_map_vars.map_script_args[map_script_id].min_zoom),map_draggable="true"==progress_map_vars.map_script_args[map_script_id].map_draggable,zoom_on_doubleclick="true"==progress_map_vars.map_script_args[map_script_id].zoom_on_doubleclick,default_options={center:[latlng[0],latlng[1]],zoom:zoom_value,maxZoom:max_zoom_value,minZoom:min_zoom_value,scrollwheel:eval(progress_map_vars.map_script_args[map_script_id].scrollwheel),mapTypeControl:eval(progress_map_vars.map_script_args[map_script_id].mapTypeControl),mapTypeControlOptions:{position:google.maps.ControlPosition.TOP_RIGHT,mapTypeIds:[google.maps.MapTypeId.ROADMAP,google.maps.MapTypeId.SATELLITE,google.maps.MapTypeId.TERRAIN,google.maps.MapTypeId.HYBRID]},streetViewControl:eval(progress_map_vars.map_script_args[map_script_id].streetViewControl),streetViewControlOptions:{position:google.maps.ControlPosition.RIGHT_TOP},draggable:map_draggable,disableDoubleClickZoom:zoom_on_doubleclick};if("true"==progress_map_vars.map_script_args[map_script_id].zoomControl&&"default"==progress_map_vars.map_script_args[map_script_id].zoomControlType)var zoom_options={zoomControl:!0,zoomControlOptions:{}};else var zoom_options={zoomControl:!1};var map_options=jQuery.extend({},default_options,zoom_options);return map_options}function cspm_initial_map_style(e,a){if("custom_style"==e&&0==a)var s={mapTypeId:google.maps.MapTypeId.ROADMAP};else if("custom_style"==e)var s={mapTypeId:"custom_style"};else if("ROADMAP"==e)var s={mapTypeId:google.maps.MapTypeId.ROADMAP};else if("SATELLITE"==e)var s={mapTypeId:google.maps.MapTypeId.SATELLITE};else if("TERRAIN"==e)var s={mapTypeId:google.maps.MapTypeId.TERRAIN};else if("HYBRID"==e)var s={mapTypeId:google.maps.MapTypeId.HYBRID};return s}function cspm_new_pin_object(e,a,s,t,i,r,o,_,n){var p="undefined"!=typeof progress_map_vars.map_script_args[r]?r:"initial";post_lat_lng_coords[r][a]=s+"_"+t,post_lat_lng_coords[r]["post_id_"+a]={},post_ids_and_child_status[r][s+"_"+t]=n;var c=""!=i?i.split(","):"";post_lat_lng_coords[r]["post_id_"+a][0]=c;var m="";if("customize"==progress_map_vars.map_script_args[p].defaultMarker){var d=o,l="true"==progress_map_vars.map_script_args[p].retinaSupport?parseInt(_.split("x")[0])/2:parseInt(_.split("x")[0]),u="true"==progress_map_vars.map_script_args[p].retinaSupport?parseInt(_.split("x")[1])/2:parseInt(_.split("x")[1]),g=u/2,f=l/2,v=null;"auto"==progress_map_vars.map_script_args[p].marker_anchor_point_option?v=new google.maps.Point(f,g):"manual"==progress_map_vars.map_script_args[p].marker_anchor_point_option&&(v="true"==progress_map_vars.map_script_args[p].retinaSupport?new google.maps.Point(progress_map_vars.map_script_args[p].marker_anchor_point.split(",")[0]/2,progress_map_vars.map_script_args[p].marker_anchor_point.split(",")[1]/2):new google.maps.Point(progress_map_vars.map_script_args[p].marker_anchor_point.split(",")[0],progress_map_vars.map_script_args[p].marker_anchor_point.split(",")[1])),m=new google.maps.MarkerImage(d,null,null,v,new google.maps.Size(l,u))}return pin_object={latLng:[s,t],tag:"post_id__"+a,id:a+"_"+n,options:{optimized:!1,icon:m,id:a,post_id:a,is_child:n}}}function cspm_clustering(e,a,s){var t,i="undefined"!=typeof progress_map_vars.map_script_args[a]?a:"initial",r=e.gmap3("get");small_cluster_size=progress_map_vars.map_script_args[i].small_cluster_size,medium_cluster_size=progress_map_vars.map_script_args[i].medium_cluster_size,big_cluster_size=progress_map_vars.map_script_args[i].big_cluster_size;var o=parseInt(progress_map_vars.map_script_args[i].max_zoom);return e.gmap3({get:{name:"marker",all:!0,callback:function(_){if(_&&"undefined"!=typeof MarkerClusterer){t=new MarkerClusterer(r,_,{gridSize:parseInt(progress_map_vars.map_script_args[i].grid_size),styles:[{url:progress_map_vars.map_script_args[i].small_cluster_icon,height:parseInt(small_cluster_size.split("x")[0]),width:parseInt(small_cluster_size.split("x")[1]),textColor:progress_map_vars.map_script_args[i].cluster_text_color,textSize:11,fontWeight:"normal",fontFamily:"sans-serif"},{url:progress_map_vars.map_script_args[i].medium_cluster_icon,height:parseInt(medium_cluster_size.split("x")[0]),width:parseInt(medium_cluster_size.split("x")[1]),textColor:progress_map_vars.map_script_args[i].cluster_text_color,textSize:13,fontWeight:"normal",fontFamily:"sans-serif"},{url:progress_map_vars.map_script_args[i].big_cluster_icon,height:parseInt(big_cluster_size.split("x")[0]),width:parseInt(big_cluster_size.split("x")[1]),textColor:progress_map_vars.map_script_args[i].cluster_text_color,textSize:15,fontWeight:"normal",fontFamily:"sans-serif"}],zoomOnClick:!0,maxZoom:o,minimumClusterSize:2,averageCenter:!0,ignoreHidden:!0,title:progress_map_vars.cluster_text,enableRetinaIcons:"true"==progress_map_vars.map_script_args[i].retinaSupport});var n;google.maps.event.addListener(t,"click",function(t){var _=r.getZoom(),p=Math.pow(2,_),c=new google.maps.LatLng(r.getBounds().getNorthEast().lat(),r.getBounds().getSouthWest().lng()),m=r.getProjection().fromLatLngToPoint(c),d=r.getProjection().fromLatLngToPoint(t.center_),l=new google.maps.Point(Math.floor((d.x-m.x)*p),Math.floor((d.y-m.y)*p)),u=e.position(),g=0;if(_>=o||"TERRAIN"==progress_map_vars.map_script_args[i].initial_map_style&&_>=15){if("undefined"!=typeof t.markers_)var f=t.markers_;else var f=t.getMarkers();var v=[];if("undefined"!=typeof f){for(var y=0;y<f.length;y++)1==f[y].visible&&(g++,v.push(f[y].id));jQuery("div.cluster_posts_widget_"+a).html('<div class="blue_cloud"></div>'),g>0?(jQuery("div.cluster_posts_widget_"+a).removeClass("flipOutX"),jQuery("div.cluster_posts_widget_"+a).addClass("cspm_animated flipInX").css("display","block"),jQuery("div.cluster_posts_widget_"+a).css({left:l.x+u.left+40+"px",top:l.y+u.top-32+"px"}),n&&4!=n.readystate&&n.abort(),n=jQuery.post(progress_map_vars.ajax_url,{action:"cspm_load_clustred_markers_list",post_ids:v,map_object_id:progress_map_vars.map_script_args[i].map_object_id,map_settings:progress_map_vars.map_script_args[i].map_settings,light_map:s},function(e){jQuery("div.cluster_posts_widget_"+a).html(e),"function"==typeof jQuery("div.cluster_posts_widget_"+a).mCustomScrollbar&&jQuery("div.cluster_posts_widget_"+a).mCustomScrollbar({autoHideScrollbar:!0,mouseWheel:{enable:!0,preventDefault:!0},theme:"dark-thin"})}),jQuery("div.cluster_posts_widget_"+a+" ul li").livequery("click",function(){var e=jQuery(this).attr("id"),s=jQuery("li#"+a+"_list_items_"+e).attr("value");cspm_call_carousel_item(jQuery("ul#codespacing_progress_map_carousel_"+a).data("jcarousel"),s),cspm_carousel_item_hover_style("li.carousel_item_"+s+"_"+a,a)})):jQuery("div.cluster_posts_widget_"+a).css({display:"none"})}cspm_zoom_in_and_out(e)}setTimeout(function(){_=r.getZoom(),"TERRAIN"!=progress_map_vars.map_script_args[i].initial_map_style&&_>o&&r.setZoom(o)},100)})}}}}),t}function cspm_zoom_in_and_out(e){var a=e.gmap3("get");a.setZoom(a.getZoom()-1),a.setZoom(a.getZoom()+1)}function cspm_simple_clustering(e){var a=e.gmap3("get");if("undefined"!=typeof MarkerClusterer){new MarkerClusterer(a)}cspm_zoom_in_and_out(e)}function cspm_ajax_item_details(e,a){var s="undefined"!=typeof progress_map_vars.map_script_args[a]?a:"initial";jQuery.post(progress_map_vars.ajax_url,{action:"cspm_load_carousel_item",post_id:e,map_object_id:progress_map_vars.map_script_args[s].map_object_id,map_settings:progress_map_vars.map_script_args[s].map_settings,items_view:progress_map_vars.map_script_args[s].items_view},function(s){jQuery("li#"+a+"_list_items_"+e).addClass("cspm_animated fadeIn").html(s)})}function cspm_animate_marker(e,a,s){var t="undefined"!=typeof progress_map_vars.map_script_args[a]?a:"initial";e.gmap3({get:{name:"marker",tag:"post_id__"+s,callback:function(i){if("undefined"!=typeof i&&1==i.visible){var r=i.is_child,o="div.cspm_infobox_container.infobox_"+s+"[data-map-id="+a+"][data-is-child="+r+"]";if(jQuery("div.cspm_infobox_container[data-map-id="+a+"]").removeClass("cspm_current_bubble"),"pulsating_circle"==progress_map_vars.map_script_args[t].markerAnimation){var _=e.gmap3("get"),n=Math.pow(2,_.getZoom()),p=new google.maps.LatLng(_.getBounds().getNorthEast().lat(),_.getBounds().getSouthWest().lng()),c=_.getProjection().fromLatLngToPoint(p),m=_.getProjection().fromLatLngToPoint(i.position),d=new google.maps.Point(Math.floor((m.x-c.x)*n),Math.floor((m.y-c.y)*n)),l=e.position();jQuery("div#pulsating_holder."+a+"_pulsating").css({display:"block",left:d.x+l.left-15+"px",top:d.y+l.top-18+"px"}),setTimeout(function(){jQuery("div#pulsating_holder."+a+"_pulsating").css("display","none"),jQuery(o).addClass("cspm_current_bubble")},1500)}else"bouncing_marker"==progress_map_vars.map_script_args[t].markerAnimation?(i.setAnimation(google.maps.Animation.BOUNCE),setTimeout(function(){i.setAnimation(null),jQuery(o).addClass("cspm_current_bubble")},1500)):"flushing_infobox"==progress_map_vars.map_script_args[t].markerAnimation&&(jQuery("div.cspm_infobox_container[data-map-id="+a+"]").removeClass("cspm_animated flash"),setTimeout(function(){jQuery(o).addClass("cspm_animated flash"),jQuery(o).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){jQuery(o).removeClass("flash")})},600))}}}})}function cspm_zoom_in(e,a,s){var t="undefined"!=typeof progress_map_vars.map_script_args[e]?e:"initial";a.livequery("click",function(){var e=s.gmap3("get"),a=e.getZoom();a<progress_map_vars.map_script_args[t].max_zoom&&e.setZoom(a+1),jQuery("div[class^=cluster_posts_widget]").removeClass("flipInX"),jQuery("div[class^=cluster_posts_widget]").addClass("cspm_animated flipOutX")})}function cspm_zoom_out(e,a,s){var t="undefined"!=typeof progress_map_vars.map_script_args[e]?e:"initial";a.livequery("click",function(){var e=s.gmap3("get"),a=e.getZoom();a>progress_map_vars.map_script_args[t].min_zoom&&e.setZoom(a-1),jQuery("div[class^=cluster_posts_widget]").removeClass("flipInX"),jQuery("div[class^=cluster_posts_widget]").addClass("cspm_animated flipOutX")})}function cspm_init_carousel(carousel_size,map_id){var map_script_id="undefined"!=typeof progress_map_vars.map_script_args[map_id]?map_id:"initial",carousel_id=map_id;if("true"!=progress_map_vars.map_script_args[map_script_id].show_carousel||"fullscreen-map"==map_layout[map_id]||"fit-in-map"==map_layout[map_id])return!1;var vertical_value=!1,dimension="listview"==progress_map_vars.map_script_args[map_script_id].items_view?progress_map_vars.map_script_args[map_script_id].horizontal_item_width:progress_map_vars.map_script_args[map_script_id].vertical_item_width;if("mr-cl"==map_layout[map_id]||"ml-cr"==map_layout[map_id]||"map-tglc-right"==map_layout[map_id]||"map-tglc-left"==map_layout[map_id])var vertical_value=!0,dimension="listview"==progress_map_vars.map_script_args[map_script_id].items_view?progress_map_vars.map_script_args[map_script_id].horizontal_item_height:progress_map_vars.map_script_args[map_script_id].vertical_item_height;var size={},auto_scroll_option={};if(""!=progress_map_vars.map_script_args[map_script_id].number_of_items)var size={size:parseInt(progress_map_vars.map_script_args[map_script_id].number_of_items)};else if(null!=carousel_size)var size={size:parseInt(carousel_size)};var default_options={scroll:eval(progress_map_vars.map_script_args[map_script_id].carousel_scroll),wrap:progress_map_vars.map_script_args[map_script_id].carousel_wrap,auto:eval(progress_map_vars.map_script_args[map_script_id].carousel_auto),initCallback:cspm_carousel_init_callback,itemFallbackDimension:parseInt(dimension),itemLoadCallback:cspm_carousel_itemLoadCallback,rtl:eval(progress_map_vars.map_script_args[map_script_id].carousel_mode),animation:progress_map_vars.map_script_args[map_script_id].carousel_animation,easing:progress_map_vars.map_script_args[map_script_id].carousel_easing,vertical:vertical_value};if(eval(progress_map_vars.map_script_args[map_script_id].carousel_auto)>0)var auto_scroll_option={itemFirstInCallback:{onAfterAnimation:cspm_carousel_item_request}};else var auto_scroll_option={itemFirstInCallback:cspm_carousel_itemFirstInCallback};var carousel_options=jQuery.extend({},default_options,size,auto_scroll_option);jQuery("ul#codespacing_progress_map_carousel_"+carousel_id).jcarousel(carousel_options)}function cspm_carousel_itemFirstInCallback(e,a,s,t){var i=e.container.context.id.split("codespacing_progress_map_carousel_")[1];if("prev"==t||"next"==t){var r=a.value;cspm_carousel_item_hover_style("li.carousel_item_"+r+"_"+i,i)}return!1}function cspm_carousel_itemLoadCallback(e){for(var a=e.container.context.id.split("codespacing_progress_map_carousel_")[1],s=parseInt(e.first);s<=parseInt(e.last);s++){var t=jQuery("li.jcarousel-item-"+s+"[class*=_"+a+"]").attr("data-post-id");jQuery("li#"+a+"_list_items_"+t).has("div.cspm_spinner").length&&cspm_ajax_item_details(t,a)}}function cspm_carousel_init_callback(e){var a=e.container.context.id.split("codespacing_progress_map_carousel_")[1],s=a,t="undefined"!=typeof progress_map_vars.map_script_args[s]?s:"initial";"true"==progress_map_vars.map_script_args[t].scrollwheel_carousel&&jQuery("ul#codespacing_progress_map_carousel_"+a).mousewheel(function(a,s){return s>0?(e.prev(),setTimeout(function(){cspm_carousel_item_request(e,0)},600),!1):0>s?(e.next(),setTimeout(function(){cspm_carousel_item_request(e,0)},600),!1):void 0}),"true"==progress_map_vars.map_script_args[t].touchswipe_carousel&&"function"==typeof jQuery("ul#codespacing_progress_map_carousel_"+a).swipe&&jQuery("ul#codespacing_progress_map_carousel_"+a).swipe({swipe:function(a,t){if("mu-cd"==map_layout[s]||"md-cu"==map_layout[s]||"m-con"==map_layout[s]||"fullscreen-map-top-carousel"==map_layout[s]||"fit-in-map-top-carousel"==map_layout[s]){if("left"==t)return e.next(),setTimeout(function(){cspm_carousel_item_request(e,0)},600),!1;if("right"==t)return e.prev(),setTimeout(function(){cspm_carousel_item_request(e,0)},600),!1}else if("ml-cr"==map_layout[s]||"mr-cl"==map_layout[s]){if("up"==t)return e.next(),setTimeout(function(){cspm_carousel_item_request(e,0)},600),!1;if("down"==t)return e.prev(),setTimeout(function(){cspm_carousel_item_request(e,0)},600),!1}},threshold:0}),e.clip.hover(function(){e.stopAuto()},function(){e.startAuto()}),e.buttonNext.bind("click",function(){setTimeout(function(){cspm_carousel_item_request(e,0)},600)}),e.buttonPrev.bind("click",function(){setTimeout(function(){cspm_carousel_item_request(e,0)},600)})}function cspm_carousel_item_request(carousel,item_value){var map_id=carousel.container.context.id.split("codespacing_progress_map_carousel_")[1],map_script_id="undefined"!=typeof progress_map_vars.map_script_args[map_id]?map_id:"initial",plugin_map=jQuery("div#codespacing_progress_map_div_"+map_id),firstItem=parseInt(carousel.first),carouselItemValue=eval(progress_map_vars.map_script_args[map_script_id].carousel_auto)>0?0:parseInt(item_value);0!=carouselItemValue&&carouselItemValue!=firstItem&&(firstItem=carouselItemValue);var overlay_id=jQuery(".jcarousel-item-"+firstItem).attr("class").split(" ")[0];if(overlay_id){var item_latlng=jQuery("li#"+map_id+"_list_items_"+overlay_id).attr("name");if(item_latlng&&"undefined"!=typeof item_latlng){var split_item_latlng=item_latlng.split("_"),this_lat=split_item_latlng[0].replace(/\"/g,""),this_lng=split_item_latlng[1].replace(/\"/g,"");cspm_carousel_item_hover_style("li#"+map_id+"_list_items_"+overlay_id,map_id),cspm_center_map_at_point(plugin_map,map_id,this_lat,this_lng,"zoom"),setTimeout(function(){cspm_animate_marker(plugin_map,map_id,overlay_id)},200)}}}function cspm_call_carousel_item(e,a){return e.scroll(jQuery.jcarousel.intval(a)),!1}function cspm_carousel_item_hover_style(e,a){var s="undefined"!=typeof progress_map_vars.map_script_args[a]?a:"initial";jQuery("li[id^="+a+"_list_items_]").removeClass("cspm_carousel_first_item").css({"background-color":progress_map_vars.map_script_args[s].items_background}),jQuery(e).addClass("cspm_carousel_first_item").css({"background-color":progress_map_vars.map_script_args[s].items_hover_background})}function cspm_rewrite_carousel(e,a,s){var t="undefined"!=typeof progress_map_vars.map_script_args[e]?e:"initial";if("yes"!=a||"true"!=progress_map_vars.map_script_args[t].show_carousel||"fullscreen-map"==map_layout[e]||"fit-in-map"==map_layout[e])return s.length;var i=jQuery("ul#codespacing_progress_map_carousel_"+e).data("jcarousel");if("undefined"!=typeof i){i.reset();var r=cspm_object_size(s);"listview"==progress_map_vars.map_script_args[t].items_view?(item_width=parseInt(progress_map_vars.map_script_args[t].horizontal_item_width),item_height=parseInt(progress_map_vars.map_script_args[t].horizontal_item_height),item_css=progress_map_vars.map_script_args[t].horizontal_item_css,items_background=progress_map_vars.map_script_args[t].items_background):"gridview"==progress_map_vars.map_script_args[t].items_view&&(item_width=parseInt(progress_map_vars.map_script_args[t].vertical_item_width),item_height=parseInt(progress_map_vars.map_script_args[t].vertical_item_height),item_css=progress_map_vars.map_script_args[t].vertical_item_css,items_background=progress_map_vars.map_script_args[t].items_background);for(var o=0,_=0;r>_;_++){var n=s[_],p=post_ids_and_child_status[e][post_lat_lng_coords[e][n]],c="";c='<li id="'+e+"_list_items_"+n+'" class="'+n+" carousel_item_"+(_+1)+"_"+e+' cspm_border_radius cspm_border_shadow" data-map-id="'+e+'" data-is-child="'+p+'" name="'+post_lat_lng_coords[e][n]+'" value="'+(_+1)+'" data-post-id="'+n+'" style="width:'+item_width+"px; height:"+item_height+"px; background-color:"+items_background+"; "+item_css+'">',c+='<div class="cspm_spinner"></div>',c+="</li>",i.add(_+1,c),o++}return cspm_init_carousel(r,e),o++}}function cspm_fullscreen_map(e){var a=window.innerWidth,s=window.innerHeight;jQuery("div.codespacing_progress_map_area[data-map-id="+e+"]").css({height:s,width:a})}function cspm_carousel_width(e){var a=jQuery("div#codespacing_progress_map_div_"+e).width();a=parseInt(a-40);var s=parseInt(-0-a/2);jQuery("div.codespacing_progress_map_carousel_on_top[data-map-id="+e+"]").css({width:a,"margin-left":s+"px"})}function cspm_fitIn_map(e){var a="undefined"!=typeof progress_map_vars.map_script_args[e]?e:"initial",s=jQuery("div.codespacing_progress_map_area[data-map-id="+e+"]").parent().height();0==s&&(s=progress_map_vars.map_script_args[a].layout_fixed_height),jQuery("div.codespacing_progress_map_area[data-map-id="+e+"]").css({height:s})}function cspm_set_markers_visibility(e,a,s,t,i,r,o){return 1==o?null!=s?e.gmap3({get:{name:"marker",all:!0,callback:function(e){e&&jQuery.each(e,function(e,a){"undefined"!=typeof a.post_id&&"user_location"!=a.post_id&&jQuery.inArray(s,i["post_id_"+a.post_id][0])>-1&&("function"==typeof a.setVisible&&a.setVisible(!0),-1===jQuery.inArray(parseInt(a.post_id),r)&&(r[t]=parseInt(a.post_id),t++)),"user_location"==a.post_id&&"function"==typeof a.setVisible&&a.setVisible(!0)})}}}):e.gmap3({get:{name:"marker",all:!0,callback:function(e){e&&jQuery.each(e,function(e,a){"function"==typeof a.setVisible&&jQuery.inArray(parseInt(a.post_id),r)>-1&&a.setVisible(!0)})}}}):e.gmap3({get:{name:"marker",all:!0,callback:function(e){e&&jQuery.each(e,function(e,a){"function"==typeof a.setVisible&&a.setVisible(!0),"undefined"!=typeof a.post_id&&"user_location"!=a.post_id&&(r[t]=parseInt(a.post_id)),t++})}}}),r}function cspm_get_distance(e,a,s,t,i){var r="metric"==i?6380:3964.34820496;return distance=Math.acos(Math.sin(cspm_deg2rad(s))*Math.sin(cspm_deg2rad(e))+Math.cos(cspm_deg2rad(s))*Math.cos(cspm_deg2rad(e))*Math.cos(cspm_deg2rad(t)-cspm_deg2rad(a)))*r}function cspm_geolocate(e,a,s,t,i,r,o,_){var n="undefined"!=typeof progress_map_vars.map_script_args[a]?a:"initial",p=e.gmap3("get"),c=(p.getZoom(),"true"==progress_map_vars.map_script_args[n].retinaSupport?parseInt(i.split("x")[0])/2:parseInt(i.split("x")[0])),m="true"==progress_map_vars.map_script_args[n].retinaSupport?parseInt(i.split("x")[1])/2:parseInt(i.split("x")[1]),d=m/2,l=c/2,u=null;u=new google.maps.Point(l,d),marker_icon=new google.maps.MarkerImage(t,null,null,u,new google.maps.Size(c,m)),e.gmap3({getgeoloc:{callback:function(t){t?e.gmap3({map:{options:{center:t,zoom:parseInt(o)},onces:{tilesloaded:function(){s&&setTimeout(function(){e.gmap3({marker:{latLng:t,tag:"cspm_user_marker_"+a,options:{icon:marker_icon,post_id:"user_location"},events:{click:function(e){if("true"==progress_map_vars.map_script_args[n].nearby_places_option){jQuery("li.cspm_proximity_name[data-map-id="+a+"]").attr("data-marker-latlng",e.position).attr("data-marker-post-id","user_location").removeClass("selected");var s=jQuery("div.cspm_map_green_msg_widget[data-map-id="+a+"]");s.text(progress_map_vars.new_marker_selected_msg).removeClass("fadeOut").addClass("cspm_animated fadeIn").css({display:"block"}),setTimeout(function(){s.removeClass("fadeIn").addClass("fadeOut"),setTimeout(function(){s.css({display:"none"})},500)},3e3)}}}},circle:{options:{center:t,radius:parseInt(1e3*r),fillColor:progress_map_vars.map_script_args[n].user_circle_fillColor,fillOpacity:progress_map_vars.map_script_args[n].user_circle_fillOpacity,strokeColor:progress_map_vars.map_script_args[n].user_circle_strokeColor,strokeOpacity:progress_map_vars.map_script_args[n].user_circle_strokeOpacity,strokeWeight:parseInt(progress_map_vars.map_script_args[n].user_circle_strokeWeight),editable:!1}}})},500)}}}}):_&&(alert(progress_map_vars.geoErrorTitle+"\n\n"+progress_map_vars.geoErrorMsg),console.log("PROGRESS MAP: "+progress_map_vars.geoDeprecateMsg))}}})}function cspm_get_user_marker(e,a){e.gmap3({get:{name:"marker",tag:"cspm_user_marker_"+a,callback:function(e){return e?e:void 0}}})}function cspm_is_panorama_active(e){var a=e.gmap3("get");if("function"==typeof a.getStreetView){var s=a.getStreetView();return s.getVisible()}return!1}function cspm_center_map_at_point(e,a,s,t,i){var r="undefined"!=typeof progress_map_vars.map_script_args[a]?a:"initial",o=e.gmap3("get"),_=o.getZoom(),n=new google.maps.LatLng(s,t);if("undefined"!=typeof progress_map_vars.map_script_args[r].carousel_map_zoom)var p=progress_map_vars.map_script_args[r].carousel_map_zoom;else var p=_;"zoom"==i&&_!=parseInt(p)?o.setZoom(parseInt(p)):"resize"==i&&google.maps.event.trigger(o,"resize"),o.panTo(n),o.setCenter(n)}function cspm_pan_map_to_fit_infobox(e,a,s){var t=e.gmap3("get"),i="div#codespacing_progress_map_div_"+a,r=(jQuery(i).width(),jQuery(i).height(),jQuery(i).position().top),o=(jQuery(i).position().left,jQuery(s.selector).width(),jQuery(s.selector).height()),_=jQuery(s.selector).position().top;jQuery(s.selector).position().left;if(_>r){var n=0,p=-(o/2);t.panBy(n,p)}}function cspm_is_bounds_contains_marker(e,a,s){var t=e.gmap3("get"),i=new google.maps.LatLng(a,s);return t.getBounds().contains(i)}function cspm_draw_multiple_infoboxes(e,a,s,t,i){var r="undefined"!=typeof progress_map_vars.map_script_args[a]?a:"initial";e.gmap3({get:{name:"marker",all:!0,callback:function(o){for(var _=0;_<o.length;_++){var n=o[_],p=parseInt(o[_].post_id);if(""!=p&&"user_location"!=p&&!isNaN(p)){var c=o[_].position,m="undefined"==typeof o[_].icon||"undefined"==typeof o[_].icon.size||"undefined"==typeof o[_].icon.size.height?38:o[_].icon.size.height,d=o[_].is_child,l=c.lat(),u=c.lng();if(cspm_is_bounds_contains_marker(e,l,u)&&null!=o[_].getMap()&&1==o[_].visible){var g=jQuery("div.infobox_"+p+".cspm_infobox_"+a+"[data-is-child="+d+"]");if(jQuery.contains(document.body,g[0])){cspm_infobox_set_position(e,g,c,m,n);var f=g.attr("data-infobox-link-target")}else{var g=s;g=g.split('<div class="cspm_infobox_container cspm_border_shadow cspm_infobox_multiple cspm_infobox_'+a+" "+t),g=jQuery('<div data-is-child="'+d+'" class="cspm_infobox_container cspm_border_shadow cspm_infobox_multiple cspm_infobox_'+a+" "+t+" infobox_"+p+g[1]),jQuery(e.selector).parent().append(g);var f=g.attr("data-infobox-link-target");cspm_infobox_set_position(e,g,c,m,n),cspm_bubbles[a].push(p),cspm_child_markers[a].push(d),cspm_requests[a].push(jQuery.post(progress_map_vars.ajax_url,{action:"cspm_infobox_content",post_id:p,map_object_id:progress_map_vars.map_script_args[r].map_object_id,map_settings:progress_map_vars.map_script_args[r].map_settings,infobox_type:t,map_id:a,status:"cspm_infobox_multiple",carousel:i,infobox_link_target:f}))}}else jQuery("div.infobox_"+p+".cspm_infobox_"+a+"[data-is-child="+d+"]").fadeOut()}if(_==o.length-1&&cspm_bubbles[a].length>0){var v=jQuery.when.apply(jQuery,cspm_requests[a]);v.done(function(){1==cspm_requests[a].length?"success"==arguments[1]&&jQuery("div.infobox_"+cspm_bubbles[a][0]+".cspm_infobox_"+a+"[data-is-child="+cspm_child_markers[a][0]+"]").html(arguments[0]):cspm_requests[a].length>1&&jQuery.each(arguments,function(e,s){s.length>0&&"success"==s[1]&&jQuery("div.infobox_"+cspm_bubbles[a][e]+".cspm_infobox_"+a+"[data-is-child="+cspm_child_markers[a][e]+"]").html(s[0])})})}}}}})}function cspm_draw_single_infobox(e,a,s,t,i,r,o){var _="undefined"!=typeof progress_map_vars.map_script_args[a]?a:"initial",n=parseInt(i.post_id),p="undefined"==typeof i.icon||"undefined"==typeof i.icon.size||"undefined"==typeof i.icon.size.height?38:i.icon.size.height,c=s.attr("data-post-id"),m=s.attr("data-infobox-link-target");if(c!=n){var d='<div class="blue_cloud"></div><div class="cspm_arrow_down '+t+'"></div>';s.html(d),r&&4!=r.readystate&&r.abort(),r=jQuery.post(progress_map_vars.ajax_url,{action:"cspm_infobox_content",post_id:n,map_object_id:progress_map_vars.map_script_args[_].map_object_id,map_settings:progress_map_vars.map_script_args[_].map_settings,infobox_type:t,map_id:a,status:"cspm_infobox_single",carousel:o,infobox_link_target:m},function(e){s.html(e)})}return s.attr("data-post-id",n),cspm_infobox_set_position(e,s,i.position,p,i),r}function cspm_set_single_infobox_position(e,a){if(a.is(":visible")){var s=a.attr("data-post-id");e.gmap3({get:{name:"marker",tag:"post_id__"+s,callback:function(s){var t="undefined"==typeof s.icon||"undefined"==typeof s.icon.size||"undefined"==typeof s.icon.size.height?38:s.icon.size.height;cspm_infobox_set_position(e,a,s.position,t,s),setTimeout(function(){null!=s.getMap()&&0!=s.visible||(a.addClass("cspm_animated fadeOutUp"),a.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){a.hide().removeClass("cspm_animated fadeOutUp")}))},400)}}})}}function cspm_infobox_set_position(e,a,s,t){var i=e.gmap3("get"),r=Math.pow(2,i.getZoom()),o=new google.maps.LatLng(i.getBounds().getNorthEast().lat(),i.getBounds().getSouthWest().lng()),_=i.getProjection().fromLatLngToPoint(o),n=i.getProjection().fromLatLngToPoint(s),p=new google.maps.Point(Math.floor((n.x-_.x)*r),Math.floor((n.y-_.y)*r)),c=e.position(),m=a.width()/2,d=t+a.height();a.css({left:p.x+c.left+"px",top:p.y+c.top+"px","margin-left":"-"+m+"px","margin-top":"-"+d+"px"}).fadeIn("slow")}function cspm_nbr_of_visible_markers(e){var a=0;return e.gmap3({get:{name:"marker",all:!0,callback:function(e){for(var s=0;s<e.length;s++)1==e[s].visible&&a++}}}),a}function cspm_hide_all_markers(e){var a=jQuery.Deferred();return e.gmap3({get:{name:"marker",all:!0,callback:function(e){jQuery.each(e,function(e,a){"function"==typeof a.setVisible&&"user_location"!=a.post_id&&a.setVisible(!1)}),a.resolve()}}}),a}function cspm_get_latLngs_bounds(e){var a,s=new google.maps.LatLngBounds,t=[];for(jQuery.each(e,function(e,a){var s=a[0],i=a[1];t.push(new google.maps.LatLng(s,i))}),a=0;a<t.length;a++)s.extend(t[a]);return s}function cspm_get_latLngs_center(e){var a=cspm_get_latLngs_bounds(e);return a.getCenter()}function cspm_are_bounds_empty(e){var a=cspm_get_latLngs_bounds(e);return a.isEmpty()}function cspm_zoom_to_address(e,a,s,t,i){a.gmap3({getlatlng:{address:s,callback:function(e,r){if("OK"==r){if(!e||"undefined"==typeof e[0].geometry.location)return;var o=a.gmap3("get");t?"undefined"!=typeof e[0].geometry.bounds?o.fitBounds(e[0].geometry.bounds):(o.panTo(e[0].geometry.location),o.setCenter(e[0].geometry.location)):(o.setZoom(parseInt(i)),o.panTo(e[0].geometry.location),o.setCenter(e[0].geometry.location))}else"ERROR"==r?alert("There was a problem contacting the Google servers. Try again."):"INVALID_REQUEST"==r?console.log("PROGRESS MAP: This GeocoderRequest was invalid"):"OVER_QUERY_LIMIT"==r?console.log("PROGRESS MAP: The webpage has gone over the requests limit in too short a period of time. Try again later."):"REQUEST_DENIED"==r?console.log("PROGRESS MAP: The webpage is not allowed to use the geocoder."):"UNKNOWN_ERROR"==r?console.log("PROGRESS MAP: A geocoding request could not be processed due to a server error. The request may succeed if you try again."):"ZERO_RESULTS"==r&&alert('No result was found for "'+s+'"')}}})}function cspm_recenter_map(e,a){var s="undefined"!=typeof progress_map_vars.map_script_args[a]?a:"initial",t=progress_map_vars.map_script_args[s].center.split(",");if("undefined"!=typeof t){var i=parseInt(progress_map_vars.map_script_args[s].zoom),r=e.gmap3("get"),o=new google.maps.LatLng(t[0],t[1]);r.setZoom(i),r.setCenter(o)}else console.log('PROGRESS MAP: There was a problem centring the map. Check your initial map center coordinates in "Progress Map => Map settings => Map center", then, try again.')}function cspm_remove_array_duplicates(e){var a=[],s=0;return jQuery.each(e,function(e,t){-1===jQuery.inArray(t,a)&&(a[s]=t,s++)}),a}function cspm_object_size(e){var a,s=0;for(a in e)e.hasOwnProperty(a)&&s++;return s}function cspm_strpos(e,a,s){var t=(e+"").indexOf(a,s||0);return-1===t?!1:t}function cspm_deg2rad(e){return.017453292519943295*e}function alerte(e){if("object"==typeof e){var a="";for(var s in e)e.hasOwnProperty(s)&&(a+="["+s+"] => "+e[s]+"\n");alert(a)}else alert(e)}window.cspm_global_object={};var map_layout={},post_ids_and_categories={},post_lat_lng_coords={},post_ids_and_child_status={},cspm_requests={},cspm_bubbles={},cspm_child_markers={};jQuery(document).ready(function($){var posts_to_retrieve={};cspm_global_object.posts_to_retrieve={},$.each($("form.faceted_search_form"),function(){var e=$(this).attr("data-map-id"),a="undefined"!=typeof progress_map_vars.map_script_args[e]?e:"initial";if("function"==typeof $("form.faceted_search_form[data-map-id="+e+"] input").iCheck)if("line"==progress_map_vars.map_script_args[a].faceted_search_input_skin){var s="black"!=progress_map_vars.map_script_args[a].faceted_search_input_color?"-"+progress_map_vars.map_script_args[a].faceted_search_input_color:"";$("form.faceted_search_form[data-map-id="+e+"] input").each(function(){var e=$(this),a=e.next(),t=a.text();a.remove(),e.iCheck({checkboxClass:"icheckbox_line"+s,radioClass:"iradio_line"+s,insert:'<div class="icheck_line-icon"></div>'+t,inheritClass:!0})})}else{if("polaris"!=progress_map_vars.map_script_args[a].faceted_search_input_skin&&"futurico"!=progress_map_vars.map_script_args[a].faceted_search_input_skin)var s="black"!=progress_map_vars.map_script_args[a].faceted_search_input_color?"-"+progress_map_vars.map_script_args[a].faceted_search_input_color:"";else var s="";$("form.faceted_search_form[data-map-id="+e+"] input").iCheck({checkboxClass:"icheckbox_"+progress_map_vars.map_script_args[a].faceted_search_input_skin+s,radioClass:"iradio_"+progress_map_vars.map_script_args[a].faceted_search_input_skin+s,increaseArea:"20%",inheritClass:!0})}}),$("div.faceted_search_btn").livequery("click",function(){var e=$(this).attr("id");$("div.faceted_search_container_"+e).is(":visible")?($("div.faceted_search_container_"+e).removeClass("slideInLeft").addClass("cspm_animated slideOutLeft"),setTimeout(function(){$("div.faceted_search_container_"+e).css({display:"none"
})},200)):$("div.faceted_search_container_"+e).removeClass("slideOutLeft").addClass("cspm_animated fadeInRight").css({display:"block"}),"function"==typeof jQuery("div.faceted_search_container_"+e).mCustomScrollbar&&($("div[class^=faceted_search_container] form.faceted_search_form ul").mCustomScrollbar("destroy"),$("div[class^=faceted_search_container] form.faceted_search_form ul").mCustomScrollbar({autoHideScrollbar:!1,mouseWheel:{enable:!0,preventDefault:!0},theme:"dark-thin"}))}),$("div[class^=reset_map_list]").livequery("click",function(){var e=$(this).attr("id"),a=$("form#faceted_search_form_"+e+" input");"function"==typeof a.iCheck&&a.iCheck("uncheck"),$(this).hide(),$("div.cspm_reset_proximities[data-map-id="+e+"]").trigger("click")});var change_event="function"==typeof $("form.faceted_search_form input").iCheck?"ifChanged":"change";$("form.faceted_search_form input").livequery(change_event,function(){var e=$(this).attr("data-map-id"),a=$(this).attr("data-show-carousel"),s=$("div#codespacing_progress_map_div_"+e),t="undefined"!=typeof progress_map_vars.map_script_args[e]?e:"initial";"undefined"!=typeof NProgress&&(NProgress.configure({parent:"div#codespacing_progress_map_div_"+e,showSpinner:!0}),NProgress.start()),cspm_hide_all_markers(s).done(function(){"undefined"!=typeof NProgress&&NProgress.set(.5),"false"==progress_map_vars.map_script_args[t].faceted_search_multi_taxonomy_option&&$("div.reset_map_list_"+e).show(),posts_to_retrieve[e]=[];var i=[],r=0,o=0,_=0,n=0;if($("div.faceted_search_container_"+e+" form.faceted_search_form input").each(function(){if(1==$(this).prop("checked")){_++;var a=$(this).val();i=cspm_remove_array_duplicates(i.concat(cspm_set_markers_visibility(s,e,a,o,post_lat_lng_coords[e],posts_to_retrieve[e],!0))),cspm_simple_clustering(s,e),r++}}),posts_to_retrieve[e]=i,0==_){var o=0;cspm_set_markers_visibility(s,e,null,o,post_lat_lng_coords[e],posts_to_retrieve[e],!1),cspm_simple_clustering(s,e)}var p=n=cspm_object_size(posts_to_retrieve[e]);if("autofit"==progress_map_vars.map_script_args[t].faceted_search_drag_map)setTimeout(function(){var e=new google.maps.LatLngBounds;s.gmap3({get:{name:"marker",all:!0,callback:function(a){a&&($.each(a,function(a,s){"undefined"!=typeof s&&1==s.visible&&e.extend(s.getPosition())}),setTimeout(function(){s.gmap3("get").fitBounds(e),cspm_zoom_in_and_out(s)},100))}}})},100);else if("drag"==progress_map_vars.map_script_args[t].faceted_search_drag_map&&p>0){var c=post_lat_lng_coords[e][posts_to_retrieve[e][0]].split("_");cspm_center_map_at_point(s,e,c[0],c[1],"zoom")}cspm_global_object.posts_to_retrieve[e]=posts_to_retrieve[e],"yes"==progress_map_vars.map_script_args[t].show_posts_count&&$("span.the_count_"+e).empty().html(n),setTimeout(function(){cspm_rewrite_carousel(e,a,posts_to_retrieve[e])},500),$("div.countries_container_"+e).is(":visible")&&($("div.countries_container_"+e).removeClass("slideInLeft").addClass("cspm_animated slideOutLeft"),setTimeout(function(){$("div.countries_container_"+e).css({display:"none"})},200),$("li.cspm_country_name[data-map-id="+e+"]").removeClass("selected")),$("div.cspm_reset_proximities[data-map-id="+e+"]").trigger("click"),"undefined"!=typeof NProgress&&NProgress.done()})}),$("div.cspm_infobox_container[data-move-carousel=true] div.cspm_infobox_content_container").livequery("mouseenter",function(){var e=$(this).attr("data-map-id"),a=$(this).attr("data-post-id"),s=$(this).attr("data-show-carousel"),t=$("ul[id^=codespacing_progress_map_carousel_] li[id="+e+"_list_items_"+a+"]").attr("value");"yes"==s&&cspm_call_carousel_item($("ul#codespacing_progress_map_carousel_"+e).data("jcarousel"),t)}),$("ul[id^=codespacing_progress_map_carousel_] li").livequery("click",function(){var e=$(this).attr("data-map-id");if("fullscreen-map"!=map_layout[e]&&"fit-in-map"!=map_layout[e]){var a=$(this).attr("value");cspm_call_carousel_item($("ul#codespacing_progress_map_carousel_"+e).data("jcarousel"),a);var s=$("ul#codespacing_progress_map_carousel_"+e).data("jcarousel");cspm_carousel_item_request(s,parseInt(a))}}).css("cursor","pointer"),"function"==typeof $("input.cspm_sf_slider_range").ionRangeSlider&&$("input.cspm_sf_slider_range").ionRangeSlider({type:"single",grid:!0}),$("div.search_form_btn").livequery("click",function(){var e=$(this).attr("id");$("div.search_form_container_"+e).is(":visible")?($("div.search_form_container_"+e).removeClass("fadeInUp").addClass("cspm_animated slideOutLeft"),setTimeout(function(){$("div.search_form_container_"+e).css({display:"none"})},200)):($("div.search_form_container_"+e).removeClass("slideOutLeft").addClass("cspm_animated fadeInUp").css({display:"block"}),setTimeout(function(){$("form#search_form_"+e+" input[name=cspm_address]").focus()},400))}),$("div[class^=cspm_submit_search_form_]").livequery("click",function(){var e=$(this).attr("data-map-id"),a="undefined"!=typeof progress_map_vars.map_script_args[e]?e:"initial";"undefined"!=typeof NProgress&&(NProgress.configure({parent:"div#codespacing_progress_map_div_"+e,showSpinner:!0}),NProgress.start());var s=$(this).attr("data-show-carousel"),t=progress_map_vars.map_script_args[a].before_search_address+$("form#search_form_"+e+" input[name=cspm_address]").val()+progress_map_vars.map_script_args[a].after_search_address,i="true"==progress_map_vars.map_script_args[a].sf_circle_option,r="true"==progress_map_vars.map_script_args[a].sf_edit_circle,o=$("form#search_form_"+e+" input[name=cspm_decimals_distance]").val();if(""!=o)var _=o;else var _=$("form#search_form_"+e+" input[name=cspm_distance]").val();var n=$("form#search_form_"+e+" input[name=cspm_distance_unit]").val();if("metric"==n)var p=1e3*_;else var p=1.60934*_*1e3;var c=$("form#search_form_"+e+" input[name=cspm_distance]").attr("data-min"),m=$("form#search_form_"+e+" input[name=cspm_distance]").attr("data-max");if("metric"==n)var d=1e3*c,l=1e3*m;else var d=1.60934*c*1e3,l=1.60934*m*1e3;var u=$("div.cspm_infobox_container.cspm_infobox_"+e),g=$("div.codespacing_progress_map_area").attr("data-show-infobox"),f=$("div.codespacing_progress_map_area").attr("data-infobox-display-event"),v=$("div#codespacing_progress_map_div_"+e),y={};y[e]=[];var h=new google.maps.Geocoder;h.geocode({address:t},function(t,h){if(h==google.maps.GeocoderStatus.OK){var b=t[0].geometry.location.lat(),x=t[0].geometry.location.lng();v.gmap3({get:{name:"marker",all:!0,callback:function(t){var h=0;$.each(t,function(a,s){var t=s.id,i=s.position;cspm_get_distance(b,x,i.lat(),i.lng(),n)<parseInt(_)&&(y[e][h]=parseInt(t),h++)}),cspm_object_size(y[e])>0?cspm_hide_all_markers(v).done(function(){if(cspm_center_map_at_point(v,e,b,x,"zoom"),cspm_set_markers_visibility(v,e,null,0,post_lat_lng_coords[e],y[e],!0),cspm_simple_clustering(v,e),cspm_global_object.posts_to_retrieve[e]=y[e],i){var t=p;v.gmap3({clear:{tag:"search_circle",all:!0},circle:{tag:"search_circle",options:{center:[b,x],radius:t,fillColor:progress_map_vars.map_script_args[a].fillColor,fillOpacity:progress_map_vars.map_script_args[a].fillOpacity,strokeColor:progress_map_vars.map_script_args[a].strokeColor,strokeOpacity:progress_map_vars.map_script_args[a].strokeOpacity,strokeWeight:parseInt(progress_map_vars.map_script_args[a].strokeWeight),editable:r},callback:function(e){v.gmap3("get").fitBounds(e.getBounds())},events:{click:function(){"true"==g&&"onload"!=f&&(u.addClass("cspm_animated fadeOutUp"),u.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){u.hide().removeClass("cspm_animated fadeOutUp")}))},radius_changed:function(a){if(r){var s=a.getRadius(),t="metric"==n?"Km":"Miles",i=$("div.cspm_map_red_msg_widget[data-map-id="+e+"]");s>l?(a.setRadius(l),i.text(progress_map_vars.circle_reached_max_msg+" ("+m+t+")").removeClass("fadeOut").addClass("cspm_animated fadeIn").css({display:"block"}),setTimeout(function(){i.removeClass("fadeIn").addClass("fadeOut"),setTimeout(function(){i.css({display:"none"})},500)},1500)):d>s&&(a.setRadius(d),i.text(progress_map_vars.circle_reached_min_msg+" ("+c+t+")").removeClass("fadeOut").addClass("cspm_animated fadeIn").css({display:"block"}),setTimeout(function(){i.removeClass("fadeIn").addClass("fadeOut"),setTimeout(function(){i.css({display:"none"})},500)},1500)),setTimeout(function(){var s=a.getRadius();if("metric"==n)var t=s/1e3;else var t=s/1.60934;$("form#search_form_"+e+" input[name=cspm_decimals_distance]").attr("value",t);var i=$("input.cspm_sf_slider_range[data-map-id="+e+"]").data("ionRangeSlider");i.update({from:t}),cspm_hide_all_markers(v).done(function(){$("div.cspm_submit_search_form_"+e).trigger("click"),cspm_zoom_in_and_out(v)})},500)}}}}})}$("div.cspm_reset_search_form_"+e).show(),"yes"==progress_map_vars.map_script_args[a].show_posts_count&&$("span.the_count_"+e).empty().html(y[e].length),setTimeout(function(){cspm_rewrite_carousel(e,s,y[e])},500)}):($("div.search_form_container_"+e+" div.cspm_search_form_notice").removeClass("fadeOut").addClass("cspm_animated fadeInLeft").css({display:"block"}),setTimeout(function(){$("div.search_form_container_"+e+" div.cspm_search_form_notice").removeClass("fadeInLeft").addClass("cspm_animated fadeOut"),setTimeout(function(){$("div.search_form_container_"+e+" div.cspm_search_form_notice").css({display:"none"})},700)},5e3),""!=o&&i&&r&&($("form#search_form_"+e+" input[name=cspm_decimals_distance]").attr("value",""),"yes"==progress_map_vars.map_script_args[a].show_posts_count&&$("span.the_count_"+e).empty().html(y[e].length),setTimeout(function(){cspm_rewrite_carousel(e,s,y[e])},500)))}}})}else $("div.search_form_container_"+e+" div.cspm_search_form_error").removeClass("fadeOut").addClass("cspm_animated fadeInLeft").css({display:"block"}),setTimeout(function(){$("div.search_form_container_"+e+" div.cspm_search_form_error").removeClass("fadeInLeft").addClass("cspm_animated fadeOut"),setTimeout(function(){$("div.search_form_container_"+e+" div.cspm_search_form_error").css({display:"none"})},700)},5e3);$("div.countries_container_"+e).is(":visible")&&($("div.countries_container_"+e).removeClass("slideInLeft").addClass("cspm_animated slideOutLeft"),setTimeout(function(){$("div.countries_container_"+e).css({display:"none"})},200),$("li.cspm_country_name[data-map-id="+e+"]").removeClass("selected")),$("div.cspm_reset_proximities[data-map-id="+e+"]").trigger("click"),"undefined"!=typeof NProgress&&NProgress.done()})}),$("div[class^=cspm_reset_search_form]").livequery("click",function(){var e=$(this).attr("data-map-id"),a="undefined"!=typeof progress_map_vars.map_script_args[e]?e:"initial";"undefined"!=typeof NProgress&&(NProgress.configure({parent:"div#codespacing_progress_map_div_"+e,showSpinner:!0}),NProgress.start());var s=$(this).attr("data-show-carousel"),t=$("div#codespacing_progress_map_div_"+e);posts_to_retrieve[e]=[],cspm_set_markers_visibility(t,e,null,0,post_lat_lng_coords[e],posts_to_retrieve[e],!1),cspm_simple_clustering(t,e),cspm_global_object.posts_to_retrieve[e]=posts_to_retrieve[e],"yes"==progress_map_vars.map_script_args[a].show_posts_count&&$("span.the_count_"+e).empty().html(posts_to_retrieve[e].length),"undefined"!=typeof NProgress&&NProgress.set(.5),t.gmap3({clear:{tag:"search_circle",all:!0}}),cspm_recenter_map(t,e),cspm_zoom_in_and_out(t),$("form#search_form_"+e+" input#cspm_address_"+e).attr("value","").focus(),setTimeout(function(){cspm_rewrite_carousel(e,s,posts_to_retrieve[e])},500),$("div.countries_container_"+e).is(":visible")&&($("div.countries_container_"+e).removeClass("slideInLeft").addClass("cspm_animated slideOutLeft"),setTimeout(function(){$("div.countries_container_"+e).css({display:"none"})},200),$("li.cspm_country_name[data-map-id="+e+"]").removeClass("selected")),$("div.cspm_reset_proximities[data-map-id="+e+"]").trigger("click"),$(this).removeClass("fadeIn").hide("fast",function(){"undefined"!=typeof NProgress&&NProgress.done()})}),$("div.toggle-carousel-bottom, div.toggle-carousel-top").livequery("click",function(){var e=$(this).attr("data-map-id");$("div#cspm_carousel_container[data-map-id="+e+"]").slideToggle("slow",function(){cspm_init_carousel(null,e)})}),$("span.cspm_distance").livequery("click",function(){var e=$(this).attr("data-map-id");$("form#search_form_"+e+" div.cspm_search_distances ul").is(":visible")?($("form#search_form_"+e+" div.cspm_search_distances ul").removeClass("fadeInDown").addClass("cspm_animated fadeOutUp"),setTimeout(function(){$("form#search_form_"+e+" div.cspm_search_distances ul").css({display:"none"})},200)):$("form#search_form_"+e+" div.cspm_search_distances ul").removeClass("fadeOutUp").addClass("cspm_animated fadeInDown").css({display:"block"})}),$("div.cspm_search_distances ul li").livequery("click",function(){var e=$(this).parent().prev().attr("data-map-id");$("form#search_form_"+e+" div.cspm_search_distances span.cspm_distance").text($(this).text()),$("form#search_form_"+e+" div.cspm_search_distances ul").removeClass("fadeInDown").addClass("cspm_animated fadeOutUp"),setTimeout(function(){$("form#search_form_"+e+" div.cspm_search_distances ul").css({display:"none"})},200)}),$("button#cspm_search_btn").livequery("click",function(){var e=$(this).attr("data-map-id"),a=$("input[name=cspm_search_address]").val(),s=$("div#cspm_frontend_form_"+e);s.gmap3({clear:{name:"marker",all:!0}});var t=new google.maps.Geocoder;t.geocode({address:a},function(a,t){if(t==google.maps.GeocoderStatus.OK){var i=a[0].geometry.location.lat(),r=a[0].geometry.location.lng();setTimeout(function(){cspm_center_map_at_point(s,e,i,r,"zoom"),s.gmap3({marker:{latLng:a[0].geometry.location,options:{draggable:!0}}})},500)}})}),$("input#cspm_search_address").keypress(function(e){13==e.keyCode&&e.preventDefault()}),$("button#cspm_get_pinpoint").livequery("click",function(){var e=$(this).attr("data-map-id"),a=$("div#cspm_frontend_form_"+e);a.gmap3({get:{name:"marker",callback:function(e){e&&($("input#cspm_latitude").val(e.getPosition().lat()),$("input#cspm_longitude").val(e.getPosition().lng()))}}})}),$("div[class^=codespacing_map_geotarget]").livequery("click",function(){var e=$(this).attr("data-map-id"),a="undefined"!=typeof progress_map_vars.map_script_args[e]?e:"initial",s=$("div#codespacing_progress_map_div_"+e);cspm_geolocate(s,e,!1,"","",0,progress_map_vars.map_script_args[a].user_map_zoom,!0)}),$("div.countries_btn").livequery("click",function(){var e=$(this).attr("data-map-id");$("div#codespacing_progress_map_div_"+e);if($("div.countries_container_"+e).is(":visible"))$("div.countries_container_"+e).removeClass("slideInLeft").addClass("cspm_animated slideOutLeft"),setTimeout(function(){$("div.countries_container_"+e).css({display:"none"})},200);else{$("div.countries_container_"+e).removeClass("slideOutLeft").addClass("cspm_animated fadeInRight").css({display:"block"});var a=$("li.cspm_country_name.selected");a.length&&"function"==typeof $("div.countries_container_"+e).mCustomScrollbar&&$("div.countries_container_"+e+" ul").mCustomScrollbar("scrollTo",a,{timeout:600})}"function"==typeof $("div.countries_container_"+e).mCustomScrollbar&&($("div[class^=countries_container] ul").mCustomScrollbar("destroy"),$("div[class^=countries_container] ul").mCustomScrollbar({autoHideScrollbar:!1,mouseWheel:{enable:!0,preventDefault:!0},theme:"dark-thin"}))}),$("li.cspm_country_name").livequery("click",function(){var e=$(this).attr("data-country-name"),a=$(this).attr("data-map-id");$("li.cspm_country_name[data-map-id="+a+"]").removeClass("selected"),$(this).addClass("selected"),"undefined"!=typeof NProgress&&(NProgress.configure({parent:"div#codespacing_progress_map_div_"+a,showSpinner:!0}),NProgress.start());var s="undefined"!=typeof progress_map_vars.map_script_args[a]?a:"initial",t=progress_map_vars.map_script_args[s].country_zoom_or_autofit,i="autofit"==t,r=progress_map_vars.map_script_args[s].country_zoom_level,o=$("div#codespacing_progress_map_div_"+a);"undefined"!=typeof NProgress&&NProgress.set(.5),cspm_zoom_to_address(a,o,e,i,r),"undefined"!=typeof NProgress&&NProgress.done()}),$("div[class^=cspm_recenter_map_btn]").livequery("click",function(){var e=$(this).attr("data-map-id"),a=$("div#codespacing_progress_map_div_"+e);"undefined"!=typeof NProgress&&(NProgress.configure({parent:"div#codespacing_progress_map_div_"+e,showSpinner:!0}),NProgress.start()),cspm_recenter_map(a,e),cspm_zoom_in_and_out(a),$("div.countries_container_"+e).is(":visible")&&($("div.countries_container_"+e).removeClass("slideInLeft").addClass("cspm_animated slideOutLeft"),setTimeout(function(){$("div.countries_container_"+e).css({display:"none"})},200),$("li.cspm_country_name[data-map-id="+e+"]").removeClass("selected")),"undefined"!=typeof NProgress&&NProgress.done()}),$("div.cspm_proximities_btn").livequery("click",function(){var e=$(this).attr("data-map-id");$("div#codespacing_progress_map_div_"+e);if("function"==typeof $("div.cspm_proximities_container_"+e).mCustomScrollbar&&($("div[class^=cspm_proximities_container] ul").mCustomScrollbar("destroy"),$("div[class^=cspm_proximities_container] ul").mCustomScrollbar({autoHideScrollbar:!1,mouseWheel:{enable:!0,preventDefault:!0},theme:"dark-thin"})),$("div.cspm_proximities_container_"+e).is(":visible"))$("div.cspm_proximities_container_"+e).removeClass("slideInLeft").addClass("cspm_animated slideOutLeft"),setTimeout(function(){$("div.cspm_proximities_container_"+e).css({display:"none"})},200);else{$("div.cspm_proximities_container_"+e).removeClass("slideOutLeft").addClass("cspm_animated fadeInRight").css({display:"block"});var a=$("li.cspm_proximity_name.selected");a.length&&"function"==typeof $("div.cspm_proximities_container_"+e).mCustomScrollbar&&$("div.cspm_proximities_container_"+e+" ul").mCustomScrollbar("scrollTo",a,{timeout:600})}});var DirectionsDisplay={};$("li.cspm_proximity_name").livequery("click",function(){var map_id=$(this).attr("data-map-id"),plugin_map=jQuery("div#codespacing_progress_map_div_"+map_id),mapObject=plugin_map.gmap3("get"),proximity_id=$(this).attr("data-proximity-id"),proximity_name=$(this).attr("data-proximity-name"),distance_unit=$(this).attr("data-distance-unit"),radius=$(this).attr("data-radius"),initial_radius=$(this).attr("data-initial-radius"),travel_mode=$(this).attr("data-travel-mode"),draw_circle=$(this).attr("data-draw-circle");draw_circle="true"==draw_circle;var edit_circle=$(this).attr("data-edit-circle");edit_circle="true"==edit_circle;var marker_type=$(this).attr("data-marker-type"),target_marker_latlng=$(this).attr("data-marker-latlng"),min_radius=$(this).attr("data-min-radius"),max_radius=$(this).attr("data-max-radius");if("METRIC"==distance_unit)var radius_in_distance_unit=radius/1e3,min_radius_in_distance_unit=min_radius/1e3,max_radius_in_distance_unit=max_radius/1e3;else{var radius_in_distance_unit=radius/1.60934;radius_in_distance_unit/=1e3;var min_radius_in_distance_unit=min_radius/1.60934;min_radius_in_distance_unit/=1e3;var max_radius_in_distance_unit=max_radius/1.60934;max_radius_in_distance_unit/=1e3}var min_radius_attempt=$(this).attr("data-min-radius-attempt"),max_radius_attempt=$(this).attr("data-max-radius-attempt"),map_message_widget=$("div.cspm_map_red_msg_widget[data-map-id="+map_id+"]");if(""==target_marker_latlng||"undefined"==typeof target_marker_latlng)map_message_widget.text(progress_map_vars.no_marker_selected_msg).removeClass("fadeOut").addClass("cspm_animated fadeIn").css({display:"block"}),setTimeout(function(){map_message_widget.removeClass("fadeIn").addClass("fadeOut"),setTimeout(function(){map_message_widget.css({display:"none"})},500)},3e3);else{if($(this).hasClass("selected"))return;$("li.cspm_proximity_name[data-map-id="+map_id+"]").removeClass("selected"),$(this).addClass("selected"),"undefined"!=typeof NProgress&&(NProgress.configure({parent:"div#codespacing_progress_map_div_"+map_id,showSpinner:!0}),NProgress.start()),$("div.cspm_proximities_container_"+map_id).removeClass("slideInLeft").addClass("cspm_animated slideOutLeft"),setTimeout(function(){$("div.cspm_proximities_container_"+map_id).css({display:"none"})},200),$("div.cspm_map_green_msg_widget[data-map-id="+map_id+"]").removeClass("fadeIn").addClass("fadeOut"),setTimeout(function(){$("div.cspm_map_green_msg_widget[data-map-id="+map_id+"]").css({display:"none"})},500),setTimeout(function(){$("div.cspm_reset_proximities[data-map-id="+map_id+"]").show()},1e3);var location_latlng=target_marker_latlng.replace("(","").replace(")","").split(",");if("undefined"==typeof location_latlng[0]&&"undefined"==typeof location_latlng[1])return void("undefined"!=typeof NProgress&&NProgress.done());plugin_map.gmap3({clear:{tag:["cspm_nearby_point_"+map_id,"cspm_nearby_circle_"+map_id]}});var DirectionsRendererOptions={suppressMarkers:!0,suppressInfoWindows:!0,draggable:!1,preserveViewport:!1,suppressBicyclingLayer:!0};null!=DirectionsDisplay[map_id]&&(DirectionsDisplay[map_id].setMap(null),DirectionsDisplay[map_id]=null),DirectionsDisplay[map_id]=new google.maps.DirectionsRenderer(DirectionsRendererOptions),DirectionsDisplay[map_id].setMap(mapObject);var request={location:new google.maps.LatLng(location_latlng[0],location_latlng[1]),radius:radius,types:[proximity_id]},service=new google.maps.places.PlacesService(mapObject),cspm_existing_places={};cspm_existing_places[map_id]=new Array,"undefined"!=typeof NProgress&&NProgress.set(.5);var markers_bounds=new google.maps.LatLngBounds,no_route_found_msg=progress_map_vars.no_route_found_msg.replace("{travel_mode}",travel_mode.toLowerCase());service.nearbySearch(request,function(results,status,pagination){if(status===google.maps.places.PlacesServiceStatus.OK){if(results.length>0){for(var i=0;i<results.length;i++){var this_place_id=results[i].place_id,this_place_location=results[i].geometry.location,this_place_name=results[i].name;if(-1==jQuery.inArray(this_place_id,cspm_existing_places[map_id])&&-1!=jQuery.inArray(proximity_id,results[i].types)){cspm_existing_places[map_id].push(this_place_id);var marker_icon="default"==marker_type?"":new google.maps.MarkerImage(progress_map_vars.plugin_url+"img/nearby/pointers/"+proximity_id+"-pin.png");plugin_map.gmap3({marker:{latLng:this_place_location,title:this_place_name,tag:"cspm_nearby_point_"+map_id,options:{icon:marker_icon,animation:google.maps.Animation.DROP,opacity:1,placeID:this_place_id,placeName:this_place_name},callback:function(e){markers_bounds.extend(e.getPosition())},events:{click:function(e){var a=new google.maps.LatLng(location_latlng[0],location_latlng[1]),s=e.position,t=$("li.cspm_proximity_name[data-map-id="+map_id+"]").attr("data-travel-mode");$("div.cspm_switch_np_travel_mode[data-map-id="+map_id+"]").attr("data-origin",a).attr("data-destination",s),plugin_map.gmap3({getroute:{options:{origin:a,destination:s,travelMode:google.maps.DirectionsTravelMode[t],unitSystem:google.maps.UnitSystem[distance_unit]},callback:function(i){if(!i)return map_message_widget.text(no_route_found_msg).removeClass("fadeOut").addClass("cspm_animated fadeIn").css({display:"block"}),setTimeout(function(){map_message_widget.removeClass("fadeIn").addClass("fadeOut"),setTimeout(function(){map_message_widget.css({display:"none"})},500)},3e3),void("undefined"!=typeof NProgress&&NProgress.done());if("OK"!==i.status)return map_message_widget.text(no_route_found_msg).removeClass("fadeOut").addClass("cspm_animated fadeIn").css({display:"block"}),setTimeout(function(){map_message_widget.removeClass("fadeIn").addClass("fadeOut"),setTimeout(function(){map_message_widget.css({display:"none"})},500)},3e3),void("undefined"!=typeof NProgress&&NProgress.done());DirectionsDisplay[map_id].setDirections(i);var r=i.routes[0],o=r.legs[0].distance.text,_=r.legs[0].duration.text,n=e.placeName;service.getDetails({placeId:e.placeID},function(i,r){if(r===google.maps.places.PlacesServiceStatus.OK){var p=a.toString().replace("(","").replace(")",""),c=s.toString().replace("(","").replace(")",""),m='<div style="padding:10px 5px; margin-bottom:5px; border-bottom:1px solid #eee; text-align:center;"><strong><a href="'+i.url+'" target="_blank">'+n+'</a></strong></div><div style="padding:5px; text-align:center;"><span style="text-align:center; padding:5px; margin-right:15px;"><img src="'+progress_map_vars.plugin_url+'img/route_distance.png" style="width:15px; margin-right:5px" /><span class="cspm_infowindow_distance">'+o+'</span></span><span style="text-align:center; padding:5px;"><img src="'+progress_map_vars.plugin_url+'img/clock.png" style="width:15px; margin-right:5px" /><span class="cspm_infowindow_duration">'+_+'</span></span><span style="text-align:center; padding:5px;"><img src="'+progress_map_vars.plugin_url+'img/directions.png" style="width:15px; margin-right:5px" /><span class="cspm_infowindow_directions"><a href="https://www.google.com/maps/dir/?api=1&origin='+p+"&destination="+c+"&destination_place_id="+i.place_id+"&travelmode="+t.toLowerCase()+'" target="_blank">Directions</a></span></span></div>';infowindow=plugin_map.gmap3({get:{name:"infowindow"}}),infowindow?(infowindow.open(mapObject,e),infowindow.setContent(m)):plugin_map.gmap3({infowindow:{anchor:e,options:{content:m}}})}})}}})}}}})}}pagination.hasNextPage?pagination.nextPage():draw_circle?setTimeout(function(){plugin_map.gmap3({circle:{tag:"cspm_nearby_circle_"+map_id,options:{center:[location_latlng[0],location_latlng[1]],radius:eval(radius),fillColor:"#0085dc",fillOpacity:.05,strokeColor:"#0085dc",strokeOpacity:.5,strokeWeight:5,editable:edit_circle},callback:function(){plugin_map.gmap3("get").fitBounds(markers_bounds),"undefined"!=typeof NProgress&&NProgress.done()},events:{radius_changed:function(circle){if(edit_circle){var circle_radius_in_meters=circle.getRadius(),readable_distance_unit="METRIC"==distance_unit?"Km":"Miles",map_message_widget=$("div.cspm_map_red_msg_widget[data-map-id="+map_id+"]");if(circle_radius_in_meters>max_radius){circle.setRadius(eval(max_radius)),map_message_widget.text(progress_map_vars.max_search_radius_msg+" ("+Math.floor(max_radius_in_distance_unit)+readable_distance_unit+")").removeClass("fadeOut").addClass("cspm_animated fadeIn").css({display:"block"}),setTimeout(function(){map_message_widget.removeClass("fadeIn").addClass("fadeOut"),setTimeout(function(){map_message_widget.css({display:"none"})},500)},3e3),$("li.cspm_proximity_name[data-map-id="+map_id+"][data-proximity-id="+proximity_id+"]").attr("data-radius",max_radius).attr("data-max-radius-attempt",eval(max_radius_attempt)+1);var reached_edge="max"}else if(min_radius>circle_radius_in_meters){circle.setRadius(eval(min_radius)),map_message_widget.text(progress_map_vars.min_search_radius_msg+" ("+Math.floor(min_radius_in_distance_unit)+readable_distance_unit+")").removeClass("fadeOut").addClass("cspm_animated fadeIn").css({display:"block"}),setTimeout(function(){map_message_widget.removeClass("fadeIn").addClass("fadeOut"),setTimeout(function(){map_message_widget.css({display:"none"})},500)},3e3),$("li.cspm_proximity_name[data-map-id="+map_id+"][data-proximity-id="+proximity_id+"]").attr("data-radius",min_radius).attr("data-min-radius-attempt",eval(min_radius_attempt)+1);var reached_edge="min"}else{var reached_edge="";$("li.cspm_proximity_name[data-map-id="+map_id+"][data-proximity-id="+proximity_id+"]").attr("data-radius",circle_radius_in_meters).attr("data-min-radius-attempt",eval(0)).attr("data-max-radius-attempt",eval(0))}setTimeout(function(){var e=$("li.cspm_proximity_name[data-map-id="+map_id+"][data-proximity-id="+proximity_id+"]").attr("data-min-radius-attempt"),a=$("li.cspm_proximity_name[data-map-id="+map_id+"][data-proximity-id="+proximity_id+"]").attr("data-max-radius-attempt");(0==e&&0==a||"min"==reached_edge&&1>=e||"max"==reached_edge&&1>=a)&&$("li.cspm_proximity_name[data-map-id="+map_id+"][data-proximity-id="+proximity_id+"]").removeClass("selected").trigger("click")},500)}}}}})},500):(plugin_map.gmap3("get").fitBounds(markers_bounds),"undefined"!=typeof NProgress&&NProgress.done())}}else if(status===google.maps.places.PlacesServiceStatus.ZERO_RESULTS)return map_message_widget.text(progress_map_vars.no_nearby_point_found).removeClass("fadeOut").addClass("cspm_animated fadeIn").css({display:"block"}),setTimeout(function(){map_message_widget.removeClass("fadeIn").addClass("fadeOut"),setTimeout(function(){map_message_widget.css({display:"none"})},500)},3e3),$("li.cspm_proximity_name[data-map-id="+map_id+"]").removeClass("selected").attr("data-radius",initial_radius).attr("data-min-radius-attempt",0).attr("data-max-radius-attempt",0),void("undefined"!=typeof NProgress&&NProgress.done())})}}),$("div.cspm_switch_np_travel_mode").livequery("click",function(){var e=$(this).attr("data-map-id"),a=$(this).attr("data-travel-mode"),s=$(this).attr("data-origin"),t=$(this).attr("data-destination"),i=$(this).attr("data-distance-unit");if(!$(this).hasClass("active")){jQuery.each($("div.cspm_switch_np_travel_mode[data-map-id="+e+"] img"),function(){var e=$(this).attr("data-inactive-src");$(this).attr("src",e)}),$("div.cspm_switch_np_travel_mode[data-map-id="+e+"]").removeClass("active"),$(this).addClass("active");var r=$("div.cspm_switch_np_travel_mode[data-map-id="+e+"][data-travel-mode="+a+"] img"),o=r.attr("data-active-src");r.attr("src",o);var _=jQuery("div#codespacing_progress_map_div_"+e);_.gmap3("get");if($("li.cspm_proximity_name[data-map-id="+e+"]").attr("data-travel-mode",a),""!=s||""!=t){var n=s.replace("(","").replace(")","").split(",");if("undefined"==typeof n[0]&&"undefined"==typeof n[1])return void("undefined"!=typeof NProgress&&NProgress.done());var p=t.replace("(","").replace(")","").split(",");if("undefined"==typeof p[0]&&"undefined"==typeof p[1])return void("undefined"!=typeof NProgress&&NProgress.done());"undefined"!=typeof NProgress&&(NProgress.configure({parent:"div#codespacing_progress_map_div_"+e,showSpinner:!0}),NProgress.start());var c=$("div.cspm_map_red_msg_widget[data-map-id="+e+"]"),m=progress_map_vars.no_route_found_msg.replace("{travel_mode}",a.toLowerCase());_.gmap3({getroute:{options:{origin:new google.maps.LatLng(n[0],n[1]),destination:new google.maps.LatLng(p[0],p[1]),travelMode:google.maps.DirectionsTravelMode[a],unitSystem:google.maps.UnitSystem[i]},callback:function(s){if(!s)return c.text(m).removeClass("fadeOut").addClass("cspm_animated fadeIn").css({display:"block"}),setTimeout(function(){c.removeClass("fadeIn").addClass("fadeOut"),setTimeout(function(){c.css({display:"none"})},500)},3e3),void("undefined"!=typeof NProgress&&NProgress.done());if("OK"!==s.status)return c.text(m).removeClass("fadeOut").addClass("cspm_animated fadeIn").css({display:"block"}),setTimeout(function(){c.removeClass("fadeIn").addClass("fadeOut"),setTimeout(function(){c.css({display:"none"})},500)},3e3),void("undefined"!=typeof NProgress&&NProgress.done());DirectionsDisplay[e].setDirections(s);var t=s.routes[0],i=t.legs[0].distance.text,r=t.legs[0].duration.text;$("span.cspm_infowindow_distance").text(i),$("span.cspm_infowindow_duration").text(r);var o=$("span.cspm_infowindow_directions a").attr("href");if("undefined"!=typeof o){var _=o.split("&"),n=_[0]+"&"+_[1]+"&"+_[2]+"&"+_[3]+"&travelmode="+a.toLowerCase();$("span.cspm_infowindow_directions a").attr("href",n)}"undefined"!=typeof NProgress&&NProgress.done()}}})}}}),$("div.cspm_reset_proximities").livequery("click",function(){var e=$(this).attr("data-map-id");"undefined"!=typeof NProgress&&(NProgress.configure({parent:"div#codespacing_progress_map_div_"+e,showSpinner:!0}),NProgress.start());var a=jQuery("div#codespacing_progress_map_div_"+e);a.gmap3("get");$(this).hide(),$("li.cspm_proximity_name[data-map-id="+e+"]").removeClass("selected").attr("data-marker-latlng",""),$("div.cspm_map_green_msg_widget[data-map-id="+e+"]").removeClass("fadeIn").addClass("fadeOut"),setTimeout(function(){$("div.cspm_map_green_msg_widget[data-map-id="+e+"]").css({display:"none"})},500),"function"==typeof $("div.cspm_proximities_container_"+e).mCustomScrollbar&&$("div.cspm_proximities_container_"+e+" ul").mCustomScrollbar("scrollTo",["top",null],{timeout:600}),a.gmap3({clear:{tag:["cspm_nearby_point_"+e,"cspm_nearby_circle_"+e]
}}),"undefined"!=typeof DirectionsDisplay[e]&&DirectionsDisplay[e].setMap(null),"undefined"!=typeof NProgress&&NProgress.done()})});